<body>  <div id="container">    <div id="background"></div>    <table cellpadding="0" cellspacing="0">      <thead>        <tr>          <th class="docs">            <h1>            	<h2>              		ResolucionFAPDocumentacion            	</h2>            </h1>          </th>          <th class="code">          </th>        </tr>      </thead>      <tbody>                                    <tr id="section-1">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-1">&#182;</a>              		</div>                 	            	 	</td>            	<td class="code">            		<pre>Lista resolucionesDefinidas crearEnumerado {<br/>	simpleTotal: "Simple Total"<br/>	multipleTotal: "Múltiple Todos Expedientes"<br/>	multipleParcialExpedientes: "Multiple Seleccionando Expedientes"<br/>}<br/><br/>Lista tipoResolucion crearEnumerado {<br/>	provisional: "Provisional"<br/>	definitiva: "Definitiva"<br/>}<br/><br/>Lista modalidadResolucion crearEnumerado {<br/>	resolucionSimple: "Simple"<br/>	resolucionMultiple: "Multiple"<br/>}<br/><br/>Lista areasResolucion crearEnumerado {<br/><br/>}<br/><br/>Lista tiposResolucion crearEnumerado {<br/><br/>}<br/>              		</pre>            	</td>          </tr>                            <tr id="section-2">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-2">&#182;</a>              		</div>                 	<p>Estados por los que va pasando la resolución</p>            	 	</td>            	<td class="code">            		<pre>Lista estadoResolucion crearEnumerado {<br/>	borrador: "Borrador"	// Ha sido creada, y establecido su tipo y modalidad<br/>	creada: "Creada"<br/>	preparada: "Preparada"<br/>	pendienteFirmaJefeServicio: "Pendiente firma Jefe Servicio"<br/>	firmadaJefeServicio: "Firmada Jefe Servicio"<br/>	pendienteFirmaDirector: "Pendiente firma Director"<br/>	firmada: "Firmada"<br/>	registrada: "Registrada"<br/>	publicada: "Publicada"<br/>	finalizada: "Finalizada"<br/>}<br/><br/>Lista estadoTipoMultiple crearEnumerado {<br/>	parcial: "Selecionar manualmente los expedientes"<br/>	total: "Todos los expedientes"<br/>}<br/><br/>Lista estadoLineaResolucion crearEnumerado {<br/>	concedida: "Concedida"<br/>	excluida: "Excluida"<br/>	denegada: "Denegada"<br/>}<br/><br/>Lista prioridadesFirmaEnPortafirma crearEnumerado {<br/>	baja: "Baja"<br/>	media: "Media"<br/>	alta: "Alta"<br/>}<br/><br/>Lista estadoPortafirma crearEnumerado {<br/>	Borrador: "Borrador"<br/>	Validandofirmas: "Validando firmas"<br/>	Pendiente: "Pendiente"<br/>	Enviada: "Enviada"<br/>	Firmadayfinalizada: "Firmada y finalizada"<br/>	Rechazada: "Rechazada"<br/>	Cerrada: "Cerrada"<br/>	Pendientevalidacionfirmas: "Perndiente de validación de firmas"<br/>}<br/>              		</pre>            	</td>          </tr>                            <tr id="section-3">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-3">&#182;</a>              		</div>                 	<p>Una línea de resolución afecta a un expediente (o Solicitud)</p>            	 	</td>            	<td class="code">            		<pre>Entidad LineaResolucionFAP {<br/>	SolicitudGenerica solicitud noConstruct<br/>	Lista estadoLineaResolucion estado<br/>	Double puntuacionBaremacion<br/>	Moneda importeTotal<br/>	Moneda importeConcedido<br/>}<br/>              		</pre>            	</td>          </tr>                            <tr id="section-4">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-4">&#182;</a>              		</div>                 	<p>Entidades de la resolución</p>            	 	</td>            	<td class="code">            		<pre>Entidad ResolucionFAP {              		</pre>            	</td>          </tr>                            <tr id="section-5">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-5">&#182;</a>              		</div>                 	<p>/ Tipo de los posibles entre los definidos de la resolución</p>            	 	</td>            	<td class="code">            		<pre>	Lista resolucionesDefinidas tipoDefinidoResolucion<br/><br/>	Lista modalidadResolucion modalidad		// Simple, Multiple<br/>	Lista tipoResolucion tipo				// Provisional, Definitiva<br/>	Lista estadoTipoMultiple tipoMultiple	// Parcial, Total<br/><br/>	Boolean firmarJefeServicio				// Debe ser firmada por el Jefe de Servicio<br/>	String jefeDeServicio					// Jefe de Servicio Solicitado<br/>	Boolean firmarDirector					// Debe ser firmada por el Director<br/>	Boolean permitirPortafirma<br/>	Boolean permitirRegistrar<br/>	Boolean permitirPublicar<br/><br/>	String prioridadFirma<br/>	DateTime fechaTopeFirma<br/><br/>	Lista estadoResolucion estado			// borrador, creada, .... finalizada<br/>              		</pre>            	</td>          </tr>                            <tr id="section-6">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-6">&#182;</a>              		</div>                 	<p>Descripción de la Resolución</p>            	 	</td>            	<td class="code">            		<pre>	String descripcion length=2500<br/>              		</pre>            	</td>          </tr>                            <tr id="section-7">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-7">&#182;</a>              		</div>                 	<p>modalidad=Simple   --> Una sola línea de resolución modalidad=Múltiple --> Varias líneas de resolución</p>            	 	</td>            	<td class="code">            		<pre>	OneToMany LineaResolucionFAP lineasResolucion<br/><br/>	Boolean conBaremacion default = 'false'<br/><br/>	String tituloInterno					// Obligatorio.<br/>	String sintesis<br/>	String observaciones<br/>	Integer folio_inicio					// Folio de inicio en el libro de resoluciones. Valor devuelto por SW de Registro de Resoluciones<br/>	Integer folio_final						// Folio final en el libro de resoluciones. Valor devuelto por SW de Registro de Resoluciones<br/>	Integer numero_folios<br/>	Integer numero							// Número de resolución. Valor devuelto por SW de Registro de Resoluciones<br/>	DateTime fechaRegistroResolucion		// Fecha de la resolución<br/>	Lista areasResolucion areasResolucion<br/>	Lista tiposResolucion tiposResolucion<br/><br/>	String idSolicitudFirma<br/>	String codigoResolucion<br/><br/>	DateTime fechaFinAceptacion						// Debería coincidir con la fecha fin reformulacion y fin alegacion si existe              		</pre>            	</td>          </tr>                            <tr id="section-8">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-8">&#182;</a>              		</div>                 	<p>DateTime fechaPublicacionFecha de Publicación en el tablón de anuncios de la sede DateTime fechaBOCFecha de Publicación en el BOC</p>            	 	</td>            	<td class="code">            		<pre>	DateTime fechaIncioPreparacion		// Fecha en la que se empieza a preparar la resolución y se crean las líneas              		</pre>            	</td>          </tr>                            <tr id="section-9">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-9">&#182;</a>              		</div>                 	<p>DateTime fechaFinPreparacionFecha en la que se finaliza la resolución Documento docResolucionDocumento de Resolución OneToMany Documento docAnexoResolucionAnexos individuales de resolucion</p>            	 	</td>            	<td class="code">            		<pre>	OneToMany Documento docConsultaPortafirmasResolucion //Documentos de Consulta Portafirmas.<br/><br/>	Registro registro<br/>	OneToMany Interesado destinatarios transient<br/>	ExpedienteAed expedienteAed<br/>              		</pre>            	</td>          </tr>                            <tr id="section-10">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-10">&#182;</a>              		</div>                 	<p>Long IDPortafirmaID devuelto por el Servicio WEb del Portafirmas String estadoPortafirmas??Pendiente de revisar</p>            	 	</td>            	<td class="code">            		<pre>	SolicitudPortafirmaFAP solicitudFirmaJefeServicio<br/>	SolicitudPortafirmaFAP solicitudFirmaDirector<br/>              		</pre>            	</td>          </tr>                            <tr id="section-11">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-11">&#182;</a>              		</div>                 	<p>Lista estadoResolucionConcesion estadoEstado de la resolución: 1.0:Creada,2.0:Preparada, 3.0:En_Firma, 4.0:Firmada, 5.0:Registrada, 6.0:Publicada OneToMany LineaResolucion lineasResolucion OneToMany ExpedientesAlegados expedientesAlegados OneToMany ExpedientesNoAceptados expedientesNoAceptados Agente destinatarioPortafirma transient</p>            	 	</td>            	<td class="code">            		<pre>              		</pre>            	</td>          </tr>                            <tr id="section-12">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-12">&#182;</a>              		</div>                 	<p>Para firmar por jefe de servicio Firmantes firmantesJefeDeServicio Para poder firmar y crear el el metodo calcular firmantes Solicitante solicitanteJefeServicio transient</p>            	 	</td>            	<td class="code">            		<pre>              		</pre>            	</td>          </tr>                            <tr id="section-13">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-13">&#182;</a>              		</div>                 	            	 	</td>            	<td class="code">            		<pre>}<br/><br/>Entidad SolicitudPortafirmaFAP {<br/>	String codSolicitudPf<br/>	String estadoPf<br/>	String tituloPf<br/>	String descripcionPf<br/>	String solicitantePf<br/>	String destinatarioPf<br/>	String emailNotificacionPf<br/>	String comentarioPf<br/>	String urlCorreoRedireccionPf<br/>	String flujoAnteriorPf<br/>}<br/><br/><br/><br/>Formulario Principal {<br/>	Pagina ResolucionesFAP titulo="Lista de Resoluciones" {<br/>		Tabla listaResoluciones titulo="Resoluciones" campo=ResolucionFAP paginaCrear=NuevaResolucion paginaEditar=EditarResolucion<br/>		{<br/>			Columna campo=ResolucionFAP.id titulo="ID" ancho="40"<br/>			Columna campo=ResolucionFAP.tipoDefinidoResolucion titulo="Resolución"<br/>			Columna campo=ResolucionFAP.tipo titulo="Tipo" ancho="100"<br/>			Columna campo=ResolucionFAP.estado titulo="Estado"<br/>			Columna campo=ResolucionFAP.modalidad titulo="Modalidad"<br/>		}<br/>	}<br/><br/>	Pagina NuevaResolucion titulo ="Resolución" campo=ResolucionFAP perteneceA="Principal" {<br/>		Accion crear redirigir=EditarResolucion<br/>		Grupo gIniciarTipo titulo="Seleccionar Resolución" {<br/>			Combo tipoDefinidoResolucion campo=ResolucionFAP.tipoDefinidoResolucion titulo="Resolución"<br/>			Combo campo=ResolucionFAP.tipo titulo="Tipo"<br/>			Texto campo=ResolucionFAP.tituloInterno titulo="Título" requerido<br/>			AreaTexto campo=ResolucionFAP.sintesis titulo="Síntesis" requerido<br/>			AreaTexto campo=ResolucionFAP.descripcion titulo="Descripción"<br/>			AreaTexto campo=ResolucionFAP.observaciones titulo="Observaciones"<br/>			Combo areasResolucion campo=ResolucionFAP.areasResolucion titulo="Área resolución" requerido<br/>			Combo tiposResolucion campo=ResolucionFAP.tiposResolucion titulo="Tipo resolución" requerido<br/>			Check campo=ResolucionFAP.conBaremacion titulo="¿Tiene Baremación?"<br/>		}<br/>	}<br/><br/>	Pagina EditarResolucion titulo="Resolución" campo=ResolucionFAP perteneceA="Principal" noForm {<br/><br/>		Grupo titulo="Seleccionar expediente" permiso=seleccionarUnExpediente {<br/>			Tabla tablaExpedientesUnico campo=SolicitudGenerica seleccionable="Crear Resolucion" {<br/>				Columna titulo = "ID" campo=SolicitudGenerica.id ancho = "40"<br/>				Columna titulo = "Expediente" campo=SolicitudGenerica.expedienteAed.idAed<br/>				Columna titulo = "Estado Interno" campo=SolicitudGenerica.estadoValue ancho = "120"<br/>				Columna titulo = "Nombre Solicitante" campo=SolicitudGenerica.solicitante.nombreCompleto expandir<br/>			}<br/>		}<br/><br/>		Grupo mostrarSiCampo ResolucionFAP.modalidad="resolucionMultiple" borde=false  {<br/>			Grupo titulo="Expedientes a Resolver" permiso=seleccionarExpedientes {<br/><br/>				Form formSeleccionarExpedientes {<br/>					Grupo titulo="Seleccionar Expedientes"{<br/>						Combo cmbTipo campo=ResolucionFAP.tipoMultiple titulo="Seleccionar" requerido<br/>						Boton btnGuardar titulo="Guardar"<br/>					}<br/>				}<br/><br/>				Tabla tablaExpedientes campo=SolicitudGenerica seleccionable="Seleccionar" {<br/>					Columna titulo="ID" campo=SolicitudGenerica.id ancho="40"<br/>					Columna titulo="Expediente" campo=SolicitudGenerica.expedienteAed.idAed<br/>					Columna titulo="Estado Interno" campo=SolicitudGenerica.estadoValue ancho="120"<br/>					Columna titulo="Nombre Solicitante" campo=SolicitudGenerica.solicitante.nombreCompleto expandir<br/>				}<br/>			}<br/><br/>			Grupo gCrearResolucion titulo="Preparar la Resolución" permiso=noSeleccionarExpedientes {<br/>				Wiki { "Si su resolución está lista para crearla, pulse el siguiente botón." }<br/>				Form frmCrearResolucion {<br/>					Boton  btnCrearResolucion titulo="Crear Líneas de Resolución"<br/>				}<br/>			}<br/>		}<br/><br/>    	Grupo gCerrarResolucion titulo="Preparar la Resolución" permiso=prepararResolucion {<br/>			Wiki { "Si su resolución está lista para firmar, pulse el siguiente botón." }<br/>			Tabla lineasResolucionAntesPreparar campo=ResolucionFAP.lineasResolucion titulo="Lineas Resolución" popupEditar=ModificarEstadoExpediente popupLeer=VerExpediente {<br/>				Columna campo=LineaResolucionFAP.id titulo="Id" ancho="40"<br/>				Columna campo=LineaResolucionFAP.solicitud.expedienteAed.idAed titulo="Expediente"<br/>				Columna campo=LineaResolucionFAP.solicitud.estado titulo="Estado Solicitud"<br/>				Columna campo=LineaResolucionFAP.solicitud.solicitante.numeroId titulo="Nif/Cif Solicitante"<br/>				Columna campo=LineaResolucionFAP.solicitud.solicitante.nombreCompleto titulo="Solicitante"<br/>				Columna campo=LineaResolucionFAP.estado titulo="Estado"<br/>			}<br/>			Form prepararResolucion {<br/>				Boton  btnPrepararResolucion titulo="Preparar Resolución"<br/>			}<br/>		}<br/><br/>		Grupo gPrepararSolicitudFirmaPortafirma titulo="Preparar Solicitud de Firma" permiso=solicitudFirmaResolucion {<br/>              		</pre>            	</td>          </tr>                            <tr id="section-14">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-14">&#182;</a>              		</div>                 	<p>Si el Agente es un JefeDeServicio, puede firmar directamente</p>            	 	</td>            	<td class="code">            		<pre>			Grupo grSolicitarFirmaPorJefeSevicio borde=false permiso=portafirmaJefeServicio {<br/>				Grupo grFirmaJefeServicio borde=false {<br/>	     			Form frmFirmarJefeServicio redirigir=EditarResolucion {<br/>						FirmaSimple firFirmarResolucion titulo="Firmar Resolucion" documento=ResolucionFAP.registro.oficial<br/>							listaFirmantes=ResolucionFAP.registro.firmantes.todos calcularFirmantes="resolucionFAP.calcularFirmantes()"<br/>					}<br/>					Wiki {"Nota: La operación de firmar y registrar puede tardar varios minutos."}<br/>				}<br/>			}<br/><br/>			Grupo gEnviarFirmaJSPortafirma permiso=firmaJefeServicio borde=false {<br/><br/>				Enlace titulo="Obtener documento de Resolución" estilo="btn" campo=ResolucionFAP.registro.borrador.urlDescarga<br/>				Tabla documentosPortafirma titulo="Documentos de Consulta Portafirmas" campo=ResolucionFAP.docConsultaPortafirmasResolucion paginaCrear=DocConsultaPortafirmaCrear paginaEditar=DocConsultaPortafirmaEditar {<br/>					Columna campo=Documento.tipo titulo="Tipo"<br/>					Columna campo=Documento.descripcionVisible titulo="Descripción" expandir<br/>					Columna funcion="<a href=\"${Documento.urlDescarga}\" target=\"_blank\">Descargar</a>" titulo="Ver" ancho="80"<br/>				}<br/><br/>				Form formSelectJefeServicio {<br/>					Combo selectJefeServicio campo=ResolucionFAP.jefeDeServicio titulo="Destinatario Portafirma" requerido<br/>					Combo selectPrioridadFirma campo=ResolucionFAP.prioridadFirma titulo="Prioridad Firma" requerido<br/>					Fecha fechaTopeFirma campo=ResolucionFAP.fechaTopeFirma titulo="Fecha Tope Firma" requerido<br/>					Texto campo=ResolucionFAP.numero_folios titulo="Nº Folios" requerido ayuda = "Número de folios del documento de la resolución" (popover)<br/>					Boton enviarFirmaJSPortafirma titulo="Enviar al portafirma"<br/>				} <br/>			}<br/><br/>			Grupo gEsperaFirmaJSPortafirma permiso=esperaFirmaJefeServicio titulo="Firma del Jefe de Servicio"{<br/>				Grupo permiso=noEditable borde=false {<br/>					Combo selectJefeServicio campo=ResolucionFAP.jefeDeServicio titulo="Jefe de Servicio Seleccionado"<br/>				}<br/>				Wiki { "_El jefe de servicio aún no ha firmado en el portafirma_" } <br/>			}<br/><br/>			Grupo gEnviarFirmaDirectorPortafirma permiso=firmaDirector titulo="Firma del Director" {<br/>				Form firmaDirectorPortafirma {<br/>					Boton enviarFirmaDirectorPortafirma titulo="Solicitar firma al Director"<br/>				}<br/>			}<br/><br/>			Grupo gEsperaFirmaDirectorPortafirma permiso=esperaFirmaDirector titulo="Firma Director"{<br/>				Wiki { "_El Director aún no ha firmado en el portafirma. Si quiere comprobar si ya se firmó darle al siguiente botón._" }<br/>				Form frmComprobarFirmas {<br/>					Boton comprobarFirmado titulo="Comprobar"<br/>				}<br/>			}<br/>		}<br/><br/>		Grupo gRegistrarResolucion titulo="Registro de la Resolución" permiso=registrarResolucion {<br/>			Grupo borde=false {<br/>				Enlace campo=ResolucionFAP.registro.oficial.urlDescargaFirmado titulo="Obtener Documento Resolución" destino="_blank" estilo="btn"<br/>			}<br/><br/>			Wiki { "Para proceder a registrar la resolución pulse el siguiente botón: \"Registrar resolución\"" }<br/><br/>			Form enviarRegistrarResolucion {<br/>      			Boton btnRegistrarResolucion titulo="Registrar Resolución"<br/>    		}<br/>		}<br/><br/>		Grupo gPublicarResolucion titulo="Publicar la Resolución en el tablón de Anuncios" permiso=publicarResolucion {<br/>			Wiki { "Publicar resolución" }<br/>			Form publicarResolucion {<br/>				Fecha campo=ResolucionFAP.fechaFinAceptacion titulo="Fecha Fin de Aceptación" requerido<br/>				Boton btnPublicarResolucion titulo="Publicar la Resolución"<br/>			}<br/>		}<br/><br/>		Grupo gFinalizarResolucion titulo="Finalizar la Resolución" permiso=finalizarResolucion {<br/>			Wiki { "Finalizar resolución" }<br/>		}<br/><br/>		Grupo gDatosResolucion titulo="Datos de la Resolución actual" permiso=mostrarDatosResolucion {<br/>			Combo campo=ResolucionFAP.tipoDefinidoResolucion titulo="Resolución"<br/>			Combo campo=ResolucionFAP.tipo titulo="Tipo"<br/>			Combo campo=ResolucionFAP.modalidad titulo="Modalidad de la Resolución" requerido<br/>			Combo campo=ResolucionFAP.estado titulo="Estado"<br/>			Texto campo=ResolucionFAP.tituloInterno titulo="Título" requerido<br/>			AreaTexto campo=ResolucionFAP.sintesis titulo="Síntesis" requerido<br/>			AreaTexto campo=ResolucionFAP.descripcion titulo="Descripción"<br/>			AreaTexto campo=ResolucionFAP.observaciones titulo="Observaciones"<br/>			Combo areasResolucion campo=ResolucionFAP.areasResolucion titulo="Área resolución" requerido<br/>			Combo tiposResolucion campo=ResolucionFAP.tiposResolucion titulo="Tipo resolución" requerido<br/>			Check campo=ResolucionFAP.conBaremacion titulo="¿Tiene Baremación?"<br/><br/>			Grupo tablaDeDatos permiso=mostrarDatosResolucion borde=false {<br/>			Tabla lineasResolucion campo=ResolucionFAP.lineasResolucion titulo="Lineas Resolución" {<br/>				Columna campo=LineaResolucionFAP.id titulo="Id"<br/>				Columna campo=LineaResolucionFAP.solicitud.expedienteAed.idAed titulo="Expediente"<br/>				Columna campo=LineaResolucionFAP.solicitud.estado titulo="Estado Solicitud"<br/>				Columna campo=LineaResolucionFAP.solicitud.solicitante.numeroId titulo="Nif/Cif Solicitante"<br/>				Columna campo=LineaResolucionFAP.solicitud.solicitante.nombreCompleto titulo="Solicitante"<br/>				Columna campo=LineaResolucionFAP.estado titulo="Estado"<br/>			}<br/>			}<br/>			Texto campo=ResolucionFAP.folio_inicio titulo="Folio Inicial"<br/>			Texto campo=ResolucionFAP.folio_final titulo="Folio Final"<br/>			Texto campo=ResolucionFAP.codigoResolucion titulo="Numero"<br/>			Fecha campo=ResolucionFAP.fechaRegistroResolucion titulo="Fecha Resolución"<br/>			Wiki { " Faltan más cosas ................ " }<br/>		}<br/>	}<br/><br/>	Popup ModificarEstadoExpediente campo=ResolucionFAP.lineasResolucion titulo="Modificar estado del expediente en la resolución"{<br/>		Grupo grNoEditable borde=false permiso=noEditable {<br/>			Texto campo=LineaResolucionFAP.solicitud.expedienteAed.idAed titulo="Expediente"<br/>			Texto campo=LineaResolucionFAP.solicitud.estado titulo="Estado Solicitud"<br/>			Texto campo=LineaResolucionFAP.solicitud.solicitante.numeroId titulo="Nif/Cif Solicitante"<br/>			Texto campo=LineaResolucionFAP.solicitud.solicitante.nombreCompleto titulo="Solicitante"<br/>		}<br/>		Grupo grEditable borde=false {<br/>			Grupo borde=false permiso=noEditable {<br/>				Texto campo=LineaResolucionFAP.puntuacionBaremacion titulo="Puntuación Baremación"<br/>			}<br/><br/>			Combo comboEstadoLinea campo=LineaResolucionFAP.estado titulo="Estado"<br/><br/>			Grupo gConcedido borde=false mostrarSiCombo comboEstadoLinea = "concedida","concedidaTurismo"{<br/>				Texto campo=LineaResolucionFAP.importeTotal titulo="Importe Total"<br/>				Texto campo=LineaResolucionFAP.importeConcedido titulo="Importe Concedido"<br/>			}<br/>		}<br/>	}<br/><br/>	Popup VerExpediente campo=ResolucionFAP.lineasResolucion {<br/>		Texto campo=LineaResolucionFAP.solicitud.expedienteAed.idAed titulo="Expediente"<br/>		Texto campo=LineaResolucionFAP.solicitud.estado titulo="Estado Solicitud"<br/>		Texto campo=LineaResolucionFAP.solicitud.solicitante.numeroId titulo="Nif/Cif Solicitante"<br/>		Texto campo=LineaResolucionFAP.solicitud.solicitante.nombreCompleto titulo="Solicitante"<br/>		Combo campo=LineaResolucionFAP.estado titulo="Estado"<br/>	}<br/><br/>	Pagina DocConsultaPortafirmaCrear campo=ResolucionFAP.docConsultaPortafirmasResolucion {<br/>		Accion crear redirigir=EditarResolucion<br/>		SubirArchivo file campo=Documento requerido /*tramite="ESTANCIAS"*/<br/>	}<br/><br/>	Pagina DocConsultaPortafirmaEditar campo=ResolucionFAP.docConsultaPortafirmasResolucion {<br/>		Accion editar redirigir=EditarResolucion<br/>		EditarArchivo file campo=Documento requerido /*tramite="ESTANCIAS"*/<br/>	}<br/>}<br/><br/>Permiso sinIniciarResolucion {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion = null<br/>		or resolucion.tipo = null<br/>	return<br/>		[editar crear]<br/>	when<br/>		resolucion.tipo != null<br/>	return<br/>		visible<br/>}<br/><br/>Permiso mostrarDatosResolucion {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado != null and<br/>		agente.rolActivo in ("administrador", "gestor", "jefeServicio")<br/>	return <br/>		visible<br/>}<br/><br/>Permiso seleccionarExpedientes {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado = "borrador" and<br/>		resolucion.tipoMultiple = "parcial" and<br/>		agente.rolActivo in ("administrador", "gestor", "jefeServicio")<br/>	return<br/>		all<br/>}<br/><br/>Permiso portafirmaJefeServicio {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		agente.rolActivo = "jefeServicio"<br/>		and resolucion.firmarJefeServicio = "true"<br/>		and resolucion.estado = "preparada"<br/>	return<br/>		all<br/>}<br/><br/>Permiso seleccionarUnExpediente {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.modalidad="resolucionSimple" and<br/>		resolucion.estado = "borrador" and<br/>		agente.rolActivo in ("administrador", "gestor", "jefeServicio")<br/>	return<br/>		all<br/>}<br/><br/>Permiso noSeleccionarExpedientes {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado = "borrador" and<br/>		resolucion.tipoMultiple = "total" and<br/>		agente.rolActivo in ("administrador", "gestor", "jefeServicio")<br/>	return<br/>		all<br/>}<br/><br/>Permiso solicitudFirmaResolucion {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		agente.rolActivo in ("gestor", "administrador", "jefeServicio")<br/>		and resolucion.estado in ("preparada", "pendienteFirmaJefeServicio", "firmadaJefeServicio", "pendienteFirmaDirector")<br/>	return<br/>		all<br/>}<br/><br/>Permiso prepararResolucion {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado = "creada" and<br/>		agente.rolActivo in ("administrador", "gestor", "jefeServicio")<br/>	return<br/>		all<br/>}<br/>              		</pre>            	</td>          </tr>                            <tr id="section-15">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-15">&#182;</a>              		</div>                 	<p>/**  * Visible el envío a portafirma para el Jefe de Servicio  </p>            	 	</td>            	<td class="code">            		<pre>Permiso firmaJefeServicio {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado in ("preparada")<br/>		and resolucion.firmarJefeServicio = "true"<br/>		and agente.rolActivo in ("gestor", "administrador", "jefeServicio")<br/>	return<br/>		all<br/>	when<br/>		resolucion.estado in ("preparada")<br/>		and resolucion.firmarJefeServicio = "true"<br/>	return<br/>		visible<br/>}<br/><br/>Permiso esperaFirmaJefeServicio {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado in ("pendienteFirmaJefeServicio")<br/>		and resolucion.firmarJefeServicio = "true"<br/>		and agente.rolActivo in ("gestor", "administrador", "jefeServicio")<br/>	return<br/>		all<br/>	when<br/>		resolucion.estado in ("pendienteFirmaJefeServicio")<br/>		and resolucion.firmarJefeServicio = "true"<br/>	return<br/>		visible<br/>}<br/><br/>              		</pre>            	</td>          </tr>                            <tr id="section-16">            	<td class="docs">              		<div class="pilwrap">                		<a class="pilcrow" href="#section-16">&#182;</a>              		</div>                 	<p>/**  * Visible el envío a portafirma para el Director  </p>            	 	</td>            	<td class="code">            		<pre>Permiso firmaDirector {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado in ("firmadaJefeServicio")<br/>		and resolucion.firmarDirector = "true"<br/>		and agente.rolActivo in ("gestor", "administrador", "jefeServicio")<br/>	return<br/>		all<br/>	when<br/>		resolucion.estado in ("firmadaJefeServicio")<br/>		and resolucion.firmarDirector = "true"<br/>	return<br/>		visible<br/>}<br/><br/>Permiso esperaFirmaDirector {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado in ("pendienteFirmaDirector")<br/>		and resolucion.firmarDirector = "true"<br/>		and agente.rolActivo in ("gestor", "administrador", "jefeServicio")<br/>	return<br/>		all<br/>	when<br/>		resolucion.estado in ("pendienteFirmaDirector")<br/>		and resolucion.firmarDirector = "true"<br/>	return<br/>		visible<br/>}<br/><br/>Permiso registrarResolucion {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado in ("firmada")<br/>		and agente.rolActivo in ("gestor", "administrador", "jefeServicio")<br/>	return<br/>		all<br/>}<br/><br/>Permiso publicarResolucion {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado in ("registrada")<br/>		and agente.rolActivo in ("gestor", "administrador", "jefeServicio")<br/>	return<br/>		all<br/>}<br/><br/>Permiso finalizarResolucion {<br/>	vars<br/>		ResolucionFAP resolucion<br/>	when<br/>		resolucion.estado in ("publicada")<br/>		and agente.rolActivo in ("gestor", "administrador", "jefeServicio")<br/>	return<br/>		all<br/>}              		</pre>            	</td>          </tr>              </tbody>    </table>  </div>  <script>        	$('pre').addClass("prettyprint");	$('pre').css('overflow', 'auto');    prettyPrint();  </script></body>