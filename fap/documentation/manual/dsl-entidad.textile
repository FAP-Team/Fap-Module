h1. Entidad

h2. Descripción

Permite definir una entidad, por defecto se creara en base de datos una tabla con los atributos de la entidad.

bc. Entidad name
	("tableName" "=" STRING)?
	(
		'(' tipo ')'
		| "extends" tipoExtends
	)?
	(Anotaciones)
	'{'
		Atributos
	'}' 

h2. Parámetros

* **name** - Identificador de la entidad
* **tableName** - (opcional) - Nombre en base de datos de la tabla que almacena los atributos de la entidad 
* **tipo** (Opcional) - Tipo especial, el cual permite incluir la entidad en la Solicitud o ser un Singleton (ver Tipos entidad especiales)
* **tipoExtends** (Opcional) - Tipo del que la entidad extenderá (ver Tipos entidad extend). 
* **Anotaciones**  (Opcional) - Permite definir anotaciones, ver Anotaciones
* **Attributes** - Lista de atributos que se asignan a la entidad, ver Atributos

h2. Tipos Entidad

h3. Especiales

Este tipo de entidad es un poco especial. Si el tipo es **(Solicitud)**, **(Solicitud[])** o **(Singleton)** su comportamiento será el siguiente.

* **(Singleton)** - Solo se creara una instancia de la clase generada por esta entidad.

bc. Entidad Quartz (Singleton){
	Boolean execute
	Boolean mostrarTodasSolicitudes
	...
}

Crea una entidad Quartz, que será singleton (*extends Singleton* - extenderá de la clase *Singleton* ya proveida).

* **(Solicitud)** - Indicará que esta entidad pertenece a solicitud, cada solicitud tiene una referencia a una instancia de esta entidad.

bc. Entidad Aceptacion(Solicitud){
	Boolean compromisos
	Boolean declaraciones
}

En este caso, se creará en Solicitud el siguiente campo:

bc. @OneToOne(cascade=CascadeType.ALL, fetch=FetchType.LAZY)
public Aceptacion aceptacion;

con lo cual se podrá acceder a él mediante **solicitud.aceptacion**.

h3. Extends 

Mientras que si el tipo es de la siguiente forma:

* **extends "NombreEntidad"** - Indicará que la entidad que estamos definiendo extenderá (será una clase hija) de la entidad *"NombreEntidad"*.

bc. Entidad RepresentantePersonaFisica extends Persona  {
	String campoMejorado
	.....
}

Creará la clase _RepresentantePersonaFisica_ que extenderá de _Persona_ y tendrá los atributos de _Persona_ mas los añadidos en la entidad _RepresentantePersonaFisica_.

bc. @Entity
public class RepresentantePersonaFisica extends Persona {
...


h2. Anotaciones

A cada entidad se le pueden asigar las siguientes anotaciones:

* **nonPersist** - La entidad no se almacenara en base de datos
* **embedded** - No se creara una tabla para almacenar los atributos de la entidad, estos se almacenaran en la tabla de la endidad que la referencie
* **inheritance** - Se le asigna el valor "joined", hace que las clases hijas creen su propia tabla para almacenar sus atributos
* **supperClass** - Se le asigna el valor "SupperClass", hace no se cree una tabla en la base de datos para esta entidad, sus atributos se almacenaran en las tablas que creen sus hijos. 
* **noConstruct** - No se genera el constructor para esta entidad. 

h2. "Atributos":dsl-atributo

Se pueden definir uno o varios atributos en la entidad, los cuales crearán los mismos en las clases de esas entidades. Para definir un atributo ("Ver Documentación":dsl-atributo):


h2. Definición

bc. Entity:
	'Entidad' (name=ID | name=EntitySpecialName) ("tableName" "=" tableName=STRING)?
			(
			    ( specialType?='(' tipoEspecial=TipoEntidad ')')
			    | (extends?='extends' (tipoExtendsEntity=[Entity] | tipoExtends=ProvidedType))
			 )? anotaciones=EntityAnotations
	'{'
		attributes+=Attribute*
	'}'
;


h2. Ejemplo de uso

bc. Entidad DatosSolicitante (Solicitud) {
	Lista cnae cnaePrincipal
	PersonaFisica amigo
	PersonaJuridica amigoJuridico
	SuperPersona superman
}
Entidad SuperPersona extends Persona {
	String unCampo
}
